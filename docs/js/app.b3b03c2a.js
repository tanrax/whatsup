(function(){"use strict";var e={9768:function(e,t,s){var o=s(9242),a=s(3396);const n={class:"nav"},r={class:"nav__ul"},i={key:0},u=(0,a.Uk)("Home"),l={key:1},c=(0,a.Uk)("Buscar"),m=(0,a.Uk)("Login");function p(e,t,s,o,p,d){const h=(0,a.up)("router-view"),g=(0,a.up)("router-link"),w=(0,a.up)("CustomButton");return(0,a.wg)(),(0,a.iD)("main",null,[(0,a.Wm)(h),(0,a._)("nav",n,[(0,a._)("ul",r,[e.$store.state.isLogin?((0,a.wg)(),(0,a.iD)("li",i,[(0,a.Wm)(g,{to:{name:"home"},class:"button"},{default:(0,a.w5)((()=>[u])),_:1})])):(0,a.kq)("",!0),e.$store.state.isLogin?((0,a.wg)(),(0,a.iD)("li",l,[(0,a.Wm)(g,{to:{name:"search"},class:"button"},{default:(0,a.w5)((()=>[c])),_:1})])):(0,a.kq)("",!0),(0,a._)("li",null,[e.$store.state.isLogin?((0,a.wg)(),(0,a.j4)(w,{key:0,text:"Salir",onDoClick:d.logout},null,8,["onDoClick"])):((0,a.wg)(),(0,a.j4)(g,{key:1,to:{name:"login"},class:"button"},{default:(0,a.w5)((()=>[m])),_:1}))])])])])}var d=s(7139);const h=["type","disabled"];function g(e,t,s,n,r,i){return(0,a.wg)(),(0,a.iD)("button",{class:"button",type:s.type,onClick:t[0]||(t[0]=(0,o.iM)((t=>e.$emit("doClick")),["prevent"])),disabled:s.buttonDisabled},(0,d.zw)(s.text),9,h)}var w={name:"CustomButton",emits:["doClick"],props:{type:{type:String,default:"button"},text:String,buttonDisabled:{type:Boolean,default:!1}}},f=s(89);const b=(0,f.Z)(w,[["render",g]]);var _=b,y=s(3506),k={mounted(){this.supabase=(0,y.eI)("https://bgztsnzrnjcijmheejnu.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJnenRzbnpybmpjaWptaGVlam51Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2NDU0MzgzNTEsImV4cCI6MTk2MTAxNDM1MX0.I9H5dgB3bE865BpMshHpsKR2_B3XFFtyEnR8mdvO_Lc")},data(){return{supabase:void 0}}},v={mixins:[k],mounted(){this.checkLogin()},methods:{checkLogin:async function(){"authenticated"!==await(this.supabase.auth.user()?.aud)&&this.$router.push({name:"login"})},isLogin:async function(){return"authenticated"===await(this.supabase.auth.user()?.aud)}}},C={name:"App",mixins:[k,v],components:{CustomButton:_},mounted:async function(){this.$store.state.isLogin=await this.isLogin()},methods:{logout:async function(){await this.supabase.auth.signOut(),this.checkLogin(),this.$store.state.isLogin=!1}}};const D=(0,f.Z)(C,[["render",p]]);var E=D,x=s(678);const I={class:"login"},M=(0,a._)("h1",null,"Identificate",-1),V={class:"login__form"},S=(0,a.Uk)("¿No tienes cuenta? "),B=(0,a.Uk)("Regístrate"),U=(0,a.Uk)(".");function L(e,t,s,o,n,r){const i=(0,a.up)("CustomInput"),u=(0,a.up)("CustomButton"),l=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",I,[M,(0,a._)("form",V,[(0,a.Wm)(i,{label:"Email",placeholcer:"Dime tu email",type:"email",modelValue:n.email,"onUpdate:modelValue":t[0]||(t[0]=e=>n.email=e)},null,8,["modelValue"]),(0,a.Wm)(i,{label:"Contraseña",placeholcer:"¿Cual es tu contraseña?",type:"password",modelValue:n.password,"onUpdate:modelValue":t[1]||(t[1]=e=>n.password=e)},null,8,["modelValue"]),(0,a.Wm)(u,{onDoClick:r.login,type:"submit",text:"Entrar"},null,8,["onDoClick"])]),(0,a._)("p",null,[S,(0,a.Wm)(l,{to:{name:"signup"}},{default:(0,a.w5)((()=>[B])),_:1}),U])])}const j={class:"input"},z={class:"input__label"},N=["type","placeholder","value"],P={key:0,class:"input__errors"};function W(e,t,s,o,n,r){return(0,a.wg)(),(0,a.iD)("div",j,[(0,a._)("label",z,[(0,a.Uk)((0,d.zw)(s.label)+" ",1),(0,a._)("input",{class:(0,d.C_)(["input__field",{input__error:s.showErrors}]),type:s.type,placeholder:s.placeholcer,value:s.modelValue,onInput:t[0]||(t[0]=t=>e.$emit("update:modelValue",t.target.value))},null,42,N)]),s.showErrors?((0,a.wg)(),(0,a.iD)("ul",P,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.errorsList,((e,t)=>((0,a.wg)(),(0,a.iD)("li",{key:t},(0,d.zw)(e),1)))),128))])):(0,a.kq)("",!0)])}var Z={name:"CustomInput",props:{type:String,placeholcer:String,label:String,showErrors:Boolean,errorsList:Array,modelValue:String}};const O=(0,f.Z)(Z,[["render",W]]);var $=O,q=s(530),A=s.n(q),H={name:"LoginView",mixins:[k],data(){return{email:"",password:""}},mounted(){this.$route.query.signup&&alert("Estas registrado!")},components:{CustomInput:$,CustomButton:_},methods:{login:async function(){A().start();const{user:e,session:t,error:s}=await this.supabase.auth.signIn({email:this.email,password:this.password});return null===e?alert(s.message):(this.$router.push({name:"home"}),this.$store.state.isLogin=!0),A().done(),t}}};const R=(0,f.Z)(H,[["render",L]]);var J=R;const T={class:"signup"},F=(0,a._)("h1",null,"Registro",-1),Y={class:"signup__form"},K=(0,a.Uk)("Identificarme"),X=(0,a.Uk)(". ");function G(e,t,s,o,n,r){const i=(0,a.up)("CustomInput"),u=(0,a.up)("CustomButton"),l=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",T,[F,(0,a._)("section",null,[(0,a._)("form",Y,[(0,a.Wm)(i,{label:"Nombre",placeholcer:"Dime tu nombre",type:"text",modelValue:n.nombre,"onUpdate:modelValue":t[0]||(t[0]=e=>n.nombre=e),showErrors:n.nombreError,errorsList:["El nombre debe tener más de 4 caracteres"]},null,8,["modelValue","showErrors"]),(0,a.Wm)(i,{label:"Email",placeholcer:"Dime tu email",type:"email",showErrors:n.emailError,modelValue:n.email,"onUpdate:modelValue":t[1]||(t[1]=e=>n.email=e),errorsList:["Email obligatorio","No contiene un formato válido"]},null,8,["showErrors","modelValue"]),(0,a.Wm)(i,{label:"Contraseña",placeholcer:"Escribe una clave dificil",type:"password",showErrors:n.passwordError,modelValue:n.password,"onUpdate:modelValue":t[2]||(t[2]=e=>n.password=e),errorsList:["Contraseña obligatoria","Las constraseñas no son igual"]},null,8,["showErrors","modelValue"]),(0,a.Wm)(i,{label:"Repite contraseña",placeholcer:"Repite contraseña",type:"password",showErrors:n.passwordError,modelValue:n.password2,"onUpdate:modelValue":t[3]||(t[3]=e=>n.password2=e)},null,8,["showErrors","modelValue"]),(0,a.Wm)(u,{onDoClick:r.validar,type:"submit",text:"Registrarme"},null,8,["onDoClick"])])]),(0,a._)("section",null,[(0,a._)("p",null,[(0,a.Wm)(l,{to:{name:"login"}},{default:(0,a.w5)((()=>[K])),_:1}),X])])])}const Q=4;var ee={name:"SignupView",mounted(){},mixins:[k],data(){return{nombre:"",nombreError:!1,email:"",emailError:!1,password:"",password2:"",passwordError:!1}},components:{CustomInput:$,CustomButton:_},methods:{validar:function(){this.nombreError=!1,this.emailError=!1,this.passwordError=!1,this.nombre.trim().length<Q&&(this.nombreError=!0),/^[a-zA-Z0-9.!#$%&’*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(this.email)||(this.emailError=!0),0!==this.password.trim().length&&this.password==this.password2||(this.passwordError=!0),this.nombreError||this.emailError||this.passwordError||this.createUser()},createUser:async function(){A().start();const{user:e,session:t,error:s}=await this.supabase.auth.signUp({email:this.email,password:this.password});return null===e?alert(s.message):(await this.supabase.from("social_network-profile").insert([{name:this.nombre,user_id:t.user.id}]),this.$router.push({name:"login",query:{signup:!0}})),A().done(),t}}};const te=(0,f.Z)(ee,[["render",G]]);var se=te;const oe={class:"home container-padding"},ae=(0,a._)("h1",null,"Hola, bienvenido a tu red",-1),ne={class:"home__posts"};function re(e,t,s,o,n,r){const i=(0,a.up)("SinglePost"),u=(0,a.up)("CustomButton"),l=(0,a.up)("NewMessage");return(0,a.wg)(),(0,a.iD)("div",oe,[ae,(0,a._)("div",ne,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.posts,((e,t)=>((0,a.wg)(),(0,a.j4)(i,{key:t,userName:r.getUserName(e.user_id),date:r.getFormatDate(e.created_at),id:e.id,message:e.text,"is-my-post":r.isMyPost(e.user_id)},null,8,["userName","date","id","message","is-my-post"])))),128))]),1!=n.page?((0,a.wg)(),(0,a.j4)(u,{key:0,onDoClick:t[0]||(t[0]=e=>n.page=n.page-1),text:"Atras"})):(0,a.kq)("",!0),n.page<r.getLastPage()?((0,a.wg)(),(0,a.j4)(u,{key:1,onDoClick:t[1]||(t[1]=e=>n.page=n.page+1),text:"Siguiente"})):(0,a.kq)("",!0),(0,a.Wm)(l,{"user-ID":n.myID},null,8,["user-ID"])])}var ie=s(1337),ue=s(505);function le(e,t,s,o,n,r){const i=(0,a.up)("CustomTextarea"),u=(0,a.up)("CustomButton");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("form",null,[(0,a.Wm)(i,{placeholcer:"Nuevo mensaje..",modelValue:n.message,"onUpdate:modelValue":t[0]||(t[0]=e=>n.message=e)},null,8,["modelValue"]),(0,a.Wm)(u,{onDoClick:r.sendMessage,type:"submit",text:"Publicar","button-disabled":r.disableSend},null,8,["onDoClick","button-disabled"])])])}const ce={class:"input"},me={class:"input__label"},pe=["placeholder","textContent"],de={key:0,class:"input__errors"};function he(e,t,s,o,n,r){return(0,a.wg)(),(0,a.iD)("div",ce,[(0,a._)("label",me,[(0,a.Uk)((0,d.zw)(s.label)+" ",1),(0,a._)("textarea",{class:(0,d.C_)(["input__field input__field--textarea",{input__error:s.showErrors}]),placeholder:s.placeholcer,onInput:t[0]||(t[0]=t=>e.$emit("update:modelValue",t.target.value)),textContent:(0,d.zw)(s.modelValue)},null,42,pe)]),s.showErrors?((0,a.wg)(),(0,a.iD)("ul",de,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.errorsList,((e,t)=>((0,a.wg)(),(0,a.iD)("li",{key:t},(0,d.zw)(e),1)))),128))])):(0,a.kq)("",!0)])}var ge={name:"CustomInput",props:{placeholcer:String,label:String,showErrors:Boolean,errorsList:Array,modelValue:String}};const we=(0,f.Z)(ge,[["render",he]]);var fe=we,be={name:"NewMessage",data(){return{message:""}},components:{CustomTextarea:fe,CustomButton:_},props:{userID:String},mixins:[k],computed:{disableSend:function(){return 0===this.message.length}},methods:{sendMessage:async function(){const{error:e}=await this.supabase.from("social_network-posts").insert([{user_id:this.userID,text:this.message}]);e?alert(e.message):this.message=""}}};const _e=(0,f.Z)(be,[["render",le]]);var ye=_e;const ke={class:"single-post__header"},ve={class:"text-semi-bold"},Ce={class:"text-s"},De={class:"single-post__content"};function Ee(e,t,s,o,n,r){const i=(0,a.up)("CustomButton");return e.isShow?((0,a.wg)(),(0,a.iD)("article",{key:0,class:(0,d.C_)(["single-post",{my:s.isMyPost}])},[(0,a._)("header",ke,[(0,a._)("p",ve,(0,d.zw)(s.userName),1),(0,a._)("p",Ce,(0,d.zw)(s.date),1)]),(0,a._)("p",De,(0,d.zw)(s.message),1),s.isMyPost?((0,a.wg)(),(0,a.j4)(i,{key:0,text:"Borrar",onDoClick:r.borrarMensaje},null,8,["onDoClick"])):(0,a.kq)("",!0)],2)):(0,a.kq)("",!0)}var xe={name:"SinglePost",components:{CustomButton:_},mixins:[k],data:function(){return{isShow:!0}},props:{id:Number,userName:String,date:String,message:String,isMyPost:Boolean},methods:{borrarMensaje:async function(){this.isShow=!1;const{data:e,error:t}=await this.supabase.from("social_network-posts").delete().eq("id",this.id);return t&&alert(t),e}}};const Ie=(0,f.Z)(xe,[["render",Ee]]);var Me=Ie,Ve={name:"HomeView",mixins:[k,v],data(){return{myID:"",userName:"",posts:[],profiles:[],numMessagePage:5,page:1,countMessages:0}},async mounted(){this.myID=await this.supabase.auth.user().id,this.getUsers(),this.getMessages(),this.refrescoAutomaticoMensajes()},components:{NewMessage:ye,SinglePost:Me,CustomButton:_},methods:{getFormatDate:function(e){return(0,ie.Z)(new Date(e),new Date,{locale:ue.Z})},getUserName:function(e){return this.profiles.filter((t=>t.user_id===e))[0]?.name},getLastPage:function(){return Math.ceil(this.countMessages/this.numMessagePage)},getCountMessages:async function(){const{data:e,error:t}=await this.supabase.from("social_network-posts").select("*");t?alert(t.message):this.countMessages=e.length},getMessages:async function(){const e=(this.page-1)*this.numMessagePage,t=e+this.numMessagePage-1,{data:s,error:o}=await this.supabase.from("social_network-posts").select("*").order("created_at",{ascending:!1}).range(e,t);this.getCountMessages(),o?alert(o.message):this.posts=s},getUsers:async function(){const{data:e,error:t}=await this.supabase.from("social_network-profile").select("name, user_id");t?alert(t.message):this.profiles=e},isMyPost:function(e){return this.myID===e},refrescoAutomaticoMensajes:function(){this.supabase.from("social_network-posts").on("*",(()=>{this.getMessages()})).subscribe()}},watch:{page:function(){this.getMessages()}}};const Se=(0,f.Z)(Ve,[["render",re]]);var Be=Se;const Ue={class:"search"},Le=(0,a._)("h1",null,"Buscador",-1),je={class:"search__form"},ze={class:"search__posts"};function Ne(e,t,s,o,n,r){const i=(0,a.up)("CustomInput"),u=(0,a.up)("CustomButton"),l=(0,a.up)("SinglePost");return(0,a.wg)(),(0,a.iD)("div",Ue,[Le,(0,a._)("form",je,[(0,a.Wm)(i,{label:"Buscador",placeholcer:"¿Qué quieres buscar?",type:"search",modelValue:n.search,"onUpdate:modelValue":t[0]||(t[0]=e=>n.search=e)},null,8,["modelValue"]),(0,a.Wm)(u,{onDoClick:r.buscar,text:"Buscar"},null,8,["onDoClick"])]),(0,a._)("div",ze,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.posts,((e,t)=>((0,a.wg)(),(0,a.j4)(l,{key:t,date:e.created_at,id:e.id,message:e.text},null,8,["date","id","message"])))),128))])])}var Pe={name:"SearchView",mixins:[k],data(){return{search:"",posts:[]}},mounted(){},components:{CustomInput:$,CustomButton:_,SinglePost:Me},methods:{buscar:async function(){const{data:e}=await this.supabase.from("social_network-posts").select("text").ilike("text",`%${this.search}%`);this.posts=e}}};const We=(0,f.Z)(Pe,[["render",Ne]]);var Ze=We;const Oe=[{path:"/",name:"login",component:J},{path:"/registro/",name:"signup",component:se},{path:"/home/",name:"home",component:Be},{path:"/buscar/",name:"search",component:Ze}],$e=(0,x.p7)({history:(0,x.r5)(),routes:Oe});var qe=$e,Ae=s(9749),He=(0,Ae.MT)({state:{isLogin:!1},getters:{},mutations:{},actions:{},modules:{}});(0,o.ri)(E).use(He).use(qe).mount("#app")}},t={};function s(o){var a=t[o];if(void 0!==a)return a.exports;var n=t[o]={exports:{}};return e[o].call(n.exports,n,n.exports,s),n.exports}s.m=e,function(){var e=[];s.O=function(t,o,a,n){if(!o){var r=1/0;for(c=0;c<e.length;c++){o=e[c][0],a=e[c][1],n=e[c][2];for(var i=!0,u=0;u<o.length;u++)(!1&n||r>=n)&&Object.keys(s.O).every((function(e){return s.O[e](o[u])}))?o.splice(u--,1):(i=!1,n<r&&(r=n));if(i){e.splice(c--,1);var l=a();void 0!==l&&(t=l)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[o,a,n]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var o in t)s.o(t,o)&&!s.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,o){var a,n,r=o[0],i=o[1],u=o[2],l=0;if(r.some((function(t){return 0!==e[t]}))){for(a in i)s.o(i,a)&&(s.m[a]=i[a]);if(u)var c=u(s)}for(t&&t(o);l<r.length;l++)n=r[l],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(c)},o=self["webpackChunkwhatsup"]=self["webpackChunkwhatsup"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=s.O(void 0,[998],(function(){return s(9768)}));o=s.O(o)})();
//# sourceMappingURL=app.b3b03c2a.js.map